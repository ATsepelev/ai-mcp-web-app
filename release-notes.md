# üéâ Release v1.3.2: Package Size Optimization

**–î–∞—Ç–∞**: 17 –æ–∫—Ç—è–±—Ä—è 2025

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ –ø–∞–∫–µ—Ç–∞ (~98% —É–º–µ–Ω—å—à–µ–Ω–∏–µ!)

- **–†–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞**: 15.7 MB ‚Üí 305.6 KB (**51√ó –º–µ–Ω—å—à–µ!**)
- **–†–∞—Å–ø–∞–∫–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä**: 34.9 MB ‚Üí 1.2 MB (**29√ó –º–µ–Ω—å—à–µ!**)

## üì¶ –ß—Ç–æ –Ω–æ–≤–æ–≥–æ

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π tiktoken –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –ø–æ–¥—Å—á—ë—Ç–∞ —Ç–æ–∫–µ–Ω–æ–≤

`js-tiktoken` —Ç–µ–ø–µ—Ä—å —è–≤–ª—è–µ—Ç—Å—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å—é:

**–ë–∞–∑–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (–ª–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è):**
```bash
npm install ai-mcp-web-app
```
- –†–∞–∑–º–µ—Ä: ~300 KB
- –ü–æ–¥—Å—á—ë—Ç —Ç–æ–∫–µ–Ω–æ–≤: –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω—ã–π (~3.5 —Å–∏–º–≤–æ–ª–æ–≤ = 1 —Ç–æ–∫–µ–Ω)
- –¢–æ—á–Ω–æ—Å—Ç—å: ~85-90%

**–° —Ç–æ—á–Ω—ã–º –ø–æ–¥—Å—á—ë—Ç–æ–º —Ç–æ–∫–µ–Ω–æ–≤:**
```bash
npm install ai-mcp-web-app js-tiktoken
```
- –†–∞–∑–º–µ—Ä: ~21 MB
- –ü–æ–¥—Å—á—ë—Ç —Ç–æ–∫–µ–Ω–æ–≤: —Ç–æ—á–Ω—ã–π (cl100k_base encoding)
- –¢–æ—á–Ω–æ—Å—Ç—å: 100%

### –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π fallback

–í–∏–¥–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ tiktoken –∏ –≤—ã–±–∏—Ä–∞–µ—Ç —Ä–µ–∂–∏–º –ø–æ–¥—Å—á—ë—Ç–∞:
- ‚úÖ **Tiktoken —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω**: —Ç–æ—á–Ω—ã–π –ø–æ–¥—Å—á—ë—Ç —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ **Tiktoken –ù–ï —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω**: –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ–¥—Å—á—ë—Ç (—Ñ–æ—Ä–º—É–ª–∞: —Å–∏–º–≤–æ–ª—ã √∑ 3.5)

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

- Dual-mode token counting: accurate (with tiktoken) or approximate (without)
- Console info message when using approximate counting
- No breaking changes - fully backward compatible
- Context management works in both modes

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ README —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –≤—ã–±–æ—Ä–µ –º–µ–∂–¥—É —Ç–æ—á–Ω–æ—Å—Ç—å—é –∏ —Ä–∞–∑–º–µ—Ä–æ–º –ø–∞–∫–µ—Ç–∞.

## üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

- Maintained all functionality from v1.3.1
- System messages properly filtered from UI
- System message always preserved in first position

## üîó –ü–æ–ª–Ω—ã–π changelog

–°–º. [CHANGELOG.md](https://github.com/ATsepelev/ai-mcp-web-app/blob/main/CHANGELOG.md) –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
npm install ai-mcp-web-app@1.3.2
```

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- **–î–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤**: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–µ–∑ tiktoken (–ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ–¥—Å—á—ë—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ—á–µ–Ω –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º)
- **–î–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π**: —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ tiktoken –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –¥–ª—è 100% —Ç–æ—á–Ω–æ—Å—Ç–∏
- **Hybrid –ø–æ–¥—Ö–æ–¥**: –Ω–∞—á–Ω–∏—Ç–µ –±–µ–∑ tiktoken, –¥–æ–±–∞–≤—å—Ç–µ –ø–æ–∑–∂–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

---

## üìã –ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ –≤ v1.3.1-1.3.2

### Context Size Management (v1.3.1)
- New `maxContextSize` parameter (default: 32000 tokens)
- Automatic message exclusion when context limit exceeded
- Visual indicators for excluded messages
- Localized tooltips (EN/RU/ZH)
- System message always preserved

### Package Size Optimization (v1.3.2)
- Made js-tiktoken optional
- Added approximate token counting fallback
- 98% package size reduction

